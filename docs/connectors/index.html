<!DOCTYPE html><html lang="en-gb"><head><meta name="generator" content="Hugo 0.20.7"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Developing Syndesis connectors | Syndesis</title><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","UA-98663114-1","auto"),ga("send","pageview")</script><link rel="canonical" href="https://syndesis.io/docs/connectors/"><link rel="icon" type="image/png" href="https://syndesis.io/images/favicon.png"><meta name="generator" content="Hugo 0.20.7"><link href="https://fonts.googleapis.com/css?family=Raleway:400,500|Righteous" rel="stylesheet"><link rel="stylesheet" href="https://syndesis.io/css/syndesis.css"></head><body class="docs"><div id="wrapper"><a href="https://github.com/syndesisio" class="github-corner hidden-md-down" aria-label="View source on Github" rel="nofollow" target="_blank"><svg width="74" height="74" viewBox="0 0 250 250" style="fill:#fff;z-index:2000;color:#0088ce;mix-blend-mode:screen;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7
        120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9
        125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6
        C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0
        C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1
        C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4
        C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9
        C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5
        C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9
        L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><nav class="navbar fixed-top navbar-inverse bg-primary navbar-toggleable-md sps sps--abv"><button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-nav" aria-controls="top-nav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button> <a href="https://syndesis.io/" title="Syndesis"><svg id="artwork" xmlns="http://www.w3.org/2000/svg" width="190px" height="39.33px" viewBox="0 0 1300 300" preserveAspectRatio="xMidYMin slice"><defs><style>.cls-1{fill:#9adde8}.cls-2{fill:#49badc}.cls-3{fill:#fff}</style></defs><title>Syndesis Logo</title><polygon class="cls-1" points="129.95 98.77 33.99 144.38 122.22 167.37 218.18 121.75 129.95 98.77"/><polygon class="cls-2" points="218.18 121.75 218.18 121.75 122.22 167.37 242.17 198.61 218.18 121.75"/><polygon class="cls-1" points="154.99 86.86 131 10 10 67.52 129.95 98.77 154.99 86.86"/><polygon class="cls-2" points="33.99 144.38 129.95 98.77 10 67.52 10 67.52 33.99 144.38"/><polygon class="cls-2" points="189.64 25.27 131 10 154.99 86.86 213.63 102.14 189.64 25.27"/><polygon class="cls-2" points="38.54 164 62.53 240.86 121.17 256.13 121.17 256.13 97.18 179.27 97.18 179.27 38.54 164"/><polygon class="cls-1" points="242.17 198.61 122.22 167.37 97.18 179.27 121.17 256.13 242.17 198.61"/><path class="cls-3" d="M358.91,210.23c-23.57,0-43.44-17.22-44.06-41.6H329.2c.41,22.74,17.21,29.3,37.09,29.3,16.6,0,35.65-9.63,35.65-28.48,0-14.76-10.65-21.73-23.15-25.82-24-8-60.45-15.58-60.45-47.55,0-25.82,23.77-40,47.13-40,19.47,0,44.88,6.77,48.15,35.25H399.28c-.41-18.24-17-23-32.17-23-15.37,0-34.43,7.79-34.43,25.82,0,42,83.61,23,83.61,74C416.29,200.39,388.62,210.23,358.91,210.23Z"/><path class="cls-3" d="M484.32,143.22l-54.51-84h17l45.29,71.52L537.4,59.2h14.34l-54.1,83.61v64.34H484.32Z"/><path class="cls-3" d="M572.24,59.2H587.4L669,189.32h.41V59.2h13.32v148h-16.8L586,79.28h-.41V207.15H572.24Z"/><path class="cls-3" d="M760,59.2c48.56,0,76.23,25,76.23,74s-27.67,74-76.23,74H720V59.2Zm3.27,135.66c41.6,0,58.61-24.39,58.61-61.69,0-43.64-25.61-62.91-67.62-61.68h-20.9V194.86Z"/><path class="cls-3" d="M870.19,207.15V59.2H958.1V71.49H883.51v53.08h71.73v12.29H883.51v58h77.67v12.29Z"/><path class="cls-3" d="M1030.44,210.23c-23.56,0-43.44-17.22-44.05-41.6h14.34c.41,22.74,17.21,29.3,37.09,29.3,16.6,0,35.66-9.63,35.66-28.48,0-14.76-10.66-21.73-23.16-25.82-24-8-60.45-15.58-60.45-47.55,0-25.82,23.77-40,47.13-40,19.47,0,44.88,6.77,48.16,35.25h-14.35c-.41-18.24-17-23-32.17-23-15.37,0-34.43,7.79-34.43,25.82,0,42,83.61,23,83.61,74C1087.82,200.39,1060.16,210.23,1030.44,210.23Z"/><path class="cls-3" d="M1121.63,207.15V58.58H1135V207.15Z"/><path class="cls-3" d="M1212.62,210.23c-23.56,0-43.44-17.22-44.06-41.6h14.35c.41,22.74,17.21,29.3,37.09,29.3,16.6,0,35.66-9.63,35.66-28.48,0-14.76-10.66-21.73-23.16-25.82-24-8-60.45-15.58-60.45-47.55,0-25.82,23.77-40,47.13-40,19.47,0,44.88,6.77,48.16,35.25H1253c-.41-18.24-17-23-32.17-23-15.37,0-34.43,7.79-34.43,25.82,0,42,83.61,23,83.61,74C1270,200.39,1242.34,210.23,1212.62,210.23Z"/></svg></a><div class="collapse navbar-collapse" id="top-nav"><ul class="navbar-nav ml-auto mt-2 mt-md-0 mr-lg-4"><li class="nav-item ml-lg-3 ml-0"><a class="nav-link" href="https://syndesis.io/quickstart/">quickstart</a></li><li class="nav-item ml-lg-3 ml-0"><a class="nav-link" href="https://syndesis.io/docs/">docs</a></li><li class="nav-item ml-lg-3 ml-0"><a class="nav-link" href="https://syndesis.io/blog/">blog</a></li><li class="nav-item ml-lg-3 ml-0"><a class="nav-link" href="https://syndesis.io/faq/">faq</a></li><li class="nav-item ml-lg-3 ml-0"><a class="nav-link" href="https://syndesis.io/community/">community</a></li></ul></div></nav><div id="main" class="d-flex flex-row"><div id="sidebar" class="sidenav"><aside><ul class="sidebar-menu"><li class="nav-button hidden-lg-up"><button type="button" class="btn btn-primary btn-sm" data-toggle="offcanvas" data-target="#sidebar">Hide nav</button></li><li><a class="" href="https://syndesis.io/about/"><i class="fa fa-fw fa-download"></i> <span>About Syndesis</span></a></li><li><a class="" href="https://syndesis.io/quickstart/"><i class="fa fa-fw fa-rocket"></i> <span>Quickstart</span></a></li><li class="sub-menu active"><a class="d-flex justify-content-between" href="https://syndesis.io/docs/"><span><i class="fa fa-fw fa-book"></i> Developer Docs</span> <span class="mr-1 expander"></span></a><ul class="sub collapse show"><li><a href="https://syndesis.io/docs/development/">Development</a></li><li><a href="https://syndesis.io/docs/backend_architecture/">Backend architecture</a></li><li><a href="https://syndesis.io/docs/cli/">CLI</a></li><li class="active"><a href="https://syndesis.io/docs/connectors/">Developing Syndesis connectors</a></li><li><a href="https://syndesis.io/docs/datashapes/">Data Shapes</a></li><li><a href="https://syndesis.io/docs/connector-schema/">Connector Schema explained</a></li></ul></li><li><a class="" href="https://syndesis.io/faq/"><i class="fa fa-fw fa-file-text"></i> <span>FAQ</span></a></li><li class="sub-menu"><a class="d-flex justify-content-between" href="https://syndesis.io/community/"><span><i class="fa fa-fw fa-group"></i> Community</span> <span class="mr-1 expander"></span></a><ul class="sub collapse"><li><a href="https://syndesis.io/community/contributing/">Contributing</a></li><li><a href="https://syndesis.io/community/engineering_guidelines/">Engineering Guidelines</a></li></ul></li><li><a href="https://github.com/syndesisio/syndesis/issues/" target="blank"><i class="fa fa-life-ring"></i> <span>Issues & Help</span></a></li><li><a href="https://github.com/syndesisio/syndesis.io/edit/master/content/docs/connectors.md" target="blank"><i class="fa fa-fw fa-edit"></i> Refine this Page</a></li></ul></aside></div><div class="main-content"><div itemscope class="doc"><meta itemprop="name" content="Developing Syndesis connectors"><meta itemprop="description" content="If Syndesis does not provide a connector for the application or service that you want to connect to in an integration, an experienced developer can develop and contribute a new Syndesis connector.
This documentation provides details about developing, testing, and deploying a new Syndesis connector. It uses the example of creating the MongoDB connector to illustrate internal behavior and analyze development choices.
Before you start to develop a connector, you should:"><meta itemprop="wordCount" content="4425"><meta itemprop="keywords" content=""><div class="hero"><h1 itemprop="headline">Developing Syndesis connectors</h1></div><div itemprop="docBody" class="docBody"><p>If Syndesis does not provide a connector for the application or service that you want to connect to in an integration, an experienced developer can develop and contribute a new Syndesis connector.</p><p>This documentation provides details about developing, testing, and deploying a new Syndesis connector. It uses the example of creating the MongoDB connector to illustrate internal behavior and analyze development choices.</p><p>Before you start to develop a connector, you should:</p><ul><li><a href="https://github.com/syndesisio/syndesis">Fork the Syndesis project</a> and become familiar with its structure.</li><li><a href="https://syndesis.io/docs/development/">Learn about Syndesis development.</a></li><li><a href="https://syndesis.io/community/contributing/#1-fork-the-repository">Read the Syndesis engineering guidelines.</a></li></ul><h3 id="overview-of-how-to-develop-a-connector">Overview of how to develop a connector</h3><p>A connector is essentially a proxy for a <a href="https://camel.apache.org/components,html">Camel component</a>. A connector configures the underlying component and creates endpoints according to options that are defined in the connector definition and in user-supplied options that the Syndesis web interface collects.</p><p>Before you start to develop a connector, become familiar with the tasks that you will need to accomplish.</p><p><strong>Prerequisites</strong></p><ul><li>Familiarity with Maven</li><li>Familiarity with Camel</li><li>Experience programming</li></ul><p><strong>General procedure</strong></p><ol><li>Learn about the Camel component that the connector will use. In particular, determine whether the connector will need to customize any behavior defined in the Camel component.</li><li>Configure a Maven project for developing the connector.</li><li>Define the connector definition JSON file.</li><li>Create a unit test for the connector.</li><li>Optional. Customize the behavior of one or more connector actions.</li><li>Optional. Customize the general behavior of the connector.</li><li>Provide a connector icon.</li><li>Integrate the new connector with existing Syndesis connectors.</li><li>Verify connections that are created from the new connector.</li></ol><h3 id="learning-about-the-camel-component-that-the-connector-uses">Learning about the Camel component that the connector uses</h3><p>Typically, you are developing a Syndesis connector that uses an existing Apache Camel component. For example, the Syndesis MongoDB connector uses the <a href="https://camel.apache.org/components/latest/mongodb-component.html">Apache Camel MongoDB component</a>.</p><p>If you want to develop a connector for which a Camel component does not yet exist, you will need to develop the Camel component first. See <a href="https://oscerd.github.io/2016/07/06/contributing-camel-components/">Contributing new components to the Apache Camel project</a>.</p><p>Learn as much as you can about the Camel component that your connector will use. In particular:</p><ul><li><p>Learn about the URI structure that the component uses in Camel. For the MongoDB component uses this structure:</p><p><code>mongodb:connectionBean?database=databaseName&amp;collection=collectionName&amp;operation=operationName[&amp;moreOptions...]</code></p><p>The most important thing you must know is the protocol. In this example, the protocol is <strong>mongodb</strong>. Specification of the protocol is how you will configure and identify the component in the Camel catalog that the connector uses.</p></li><li><p>Identify the Camel component parameters that are important for connector development:</p><ul><li>Required parameters</li><li>Parameters needed for consumer endpoints</li><li>Parameters needed for producer endpoints<br></li></ul></li><li><p>You must know the expected type for each parameter value. Often, a parameter requires a string value that indicates a configuration option. But sometimes a parameter value must be something more complicated, such as a Java object that represents a data source or a connection bean.</p><ul><li>Experiment with the Camel component as a way to learn about it.<br>When your new connector is deployed, it will be used in a Camel route that is running, typically, in a container. Consequently, you want to be familiar with how the Camel component behaves in a deployed Camel route in a container. <a href="https://github.com/apache/camel/tree/master/examples">Look at examples that use the Camel component</a> that your connector will use.</li></ul></li></ul><p>If you are going to make any changes to an existing Camel component, be sure to bring the correct Camel component version into your project. You must also rebuild the <code>camel-catalog</code> dependency since Syndesis uses this dependency at runtime to read configuration information, such as the expected parameters. Any changes that you make to the Camel component must be reflected by refreshing this dependency.</p><h3 id="configuring-a-maven-project-for-developing-a-connector">Configuring a Maven project for developing a connector</h3><p>There is not yet a Maven archetype for creating a Syndesis connector. Consequently, you must manually configure a <code>pom.xml</code> file for the Maven project that you will use to develop the connector.</p><p><strong>Procedure</strong></p><ol><li><p>In your local Syndesis clone, in the <code>app/connector</code> folder, create a folder for your new connector. For example, the MongoDB connector is in the <code>app/connector/mongodb</code> folder.</p></li><li><p>In the folder that you just created, create the minimum viable <code>pom.xml</code> file that wraps all needed dependencies for your new connector. Be sure to maintain the structure of the sample file shown here.</p><ol><li><p>Add the connector description.</p><p>Almost everything related to the project is managed by the <code>connector-parent</code> artifact. You just have to provide the name of this new dependency:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>    <span style="color:#999;font-weight:700;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
    <span style="color:#998;font-style:italic">&lt;!-- Copyright (C) 2016 Red Hat, Inc. Licensed under the Apache ...--&gt;</span>
    <span style="color:navy">&lt;project</span> <span style="color:teal">xmlns=</span><span style="color:#d14">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span style="color:teal">xmlns:xsi=</span><span style="color:#d14">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span style="color:teal">xsi:schemaLocation=</span><span style="color:#d14">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="color:navy">&gt;</span>
        <span style="color:navy">&lt;parent&gt;</span>
                    <span style="color:navy">&lt;groupId&gt;</span>io.syndesis.connector<span style="color:navy">&lt;/groupId&gt;</span>
                    <span style="color:navy">&lt;artifactId&gt;</span>connector-parent<span style="color:navy">&lt;/artifactId&gt;</span>
                    <span style="color:navy">&lt;version&gt;</span>1.7-SNAPSHOT<span style="color:navy">&lt;/version&gt;</span>
                    <span style="color:navy">&lt;relativePath&gt;</span>../pom.xml<span style="color:navy">&lt;/relativePath&gt;</span>
        <span style="color:navy">&lt;/parent&gt;</span>

        <span style="color:navy">&lt;modelVersion&gt;</span>4.0.0<span style="color:navy">&lt;/modelVersion&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>connector-mongodb<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;name&gt;</span>Connector :: MongoDB<span style="color:navy">&lt;/name&gt;</span>
        <span style="color:navy">&lt;packaging&gt;</span>jar<span style="color:navy">&lt;/packaging&gt;</span>
</pre></div><p>Change the <code>&lt;version&gt;</code>, the second <code>&lt;artifactId</code>&gt; and the <code>&lt;name&gt;</code> as needed. The value of the second <code>&lt;artifactId&gt;</code> element should follow the convention shown in this example. That is, the format for the value is <code>connector-</code><em>camel-component-name</em>.</p></li><li><p>Add the basic dependencies to the connector’s <code>pom.xml</code> file as well as the dependencies needed to develop your connector. For example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>    <span style="color:navy">&lt;dependencies&gt;</span>
        <span style="color:navy">&lt;dependency&gt;</span>
            <span style="color:navy">&lt;groupId&gt;</span>org.apache.camel<span style="color:navy">&lt;/groupId&gt;</span>
            <span style="color:navy">&lt;artifactId&gt;</span>camel-core<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;/dependency&gt;</span>
        <span style="color:navy">&lt;dependency&gt;</span>
            <span style="color:navy">&lt;groupId&gt;</span>io.syndesis.common<span style="color:navy">&lt;/groupId&gt;</span>
            <span style="color:navy">&lt;artifactId&gt;</span>common-model<span style="color:navy">&lt;/artifactId&gt;</span>
            <span style="color:navy">&lt;scope&gt;</span>provided<span style="color:navy">&lt;/scope&gt;</span>
        <span style="color:navy">&lt;/dependency&gt;</span>
        <span style="color:navy">&lt;dependency&gt;</span>
            <span style="color:navy">&lt;groupId&gt;</span>org.slf4j<span style="color:navy">&lt;/groupId&gt;</span>
            <span style="color:navy">&lt;artifactId&gt;</span>slf4j-api<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;/dependency&gt;</span>
        <span style="color:navy">&lt;dependency&gt;</span>
            <span style="color:navy">&lt;groupId&gt;</span>io.syndesis.integration<span style="color:navy">&lt;/groupId&gt;</span>
            <span style="color:navy">&lt;artifactId&gt;</span>integration-component-proxy<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;/dependency&gt;</span>
        <span style="color:navy">&lt;dependency&gt;</span>
            <span style="color:navy">&lt;groupId&gt;</span>com.fasterxml.jackson.core<span style="color:navy">&lt;/groupId&gt;</span>
            <span style="color:navy">&lt;artifactId&gt;</span>jackson-databind<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;/dependency&gt;</span>
        <span style="color:navy">&lt;dependency&gt;</span>
            <span style="color:navy">&lt;groupId&gt;</span>org.mongodb<span style="color:navy">&lt;/groupId&gt;</span>
            <span style="color:navy">&lt;artifactId&gt;</span>mongo-java-driver<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;/dependency&gt;</span>
</pre></div><p>In the <code>pom.xml</code> file for your connector, you can of course omit the MongoDB dependency. You might notice that the <code>camel-mongodb</code> dependency is not yet specified. This is addressed later.</p></li><li><p>Add the testing dependencies that will help you set up a unit test. For example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#998;font-style:italic">&lt;!-- Testing --&gt;</span>
    <span style="color:navy">&lt;dependency&gt;</span>
        <span style="color:navy">&lt;groupId&gt;</span>junit<span style="color:navy">&lt;/groupId&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>junit<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;scope&gt;</span>test<span style="color:navy">&lt;/scope&gt;</span>
    <span style="color:navy">&lt;/dependency&gt;</span>        
    <span style="color:navy">&lt;dependency&gt;</span>
        <span style="color:navy">&lt;groupId&gt;</span>org.apache.camel<span style="color:navy">&lt;/groupId&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>camel-test<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;scope&gt;</span>test<span style="color:navy">&lt;/scope&gt;</span>
    <span style="color:navy">&lt;/dependency&gt;</span>
    <span style="color:navy">&lt;dependency&gt;</span>
        <span style="color:navy">&lt;groupId&gt;</span>org.assertj<span style="color:navy">&lt;/groupId&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>assertj-core<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;scope&gt;</span>test<span style="color:navy">&lt;/scope&gt;</span>
    <span style="color:navy">&lt;/dependency&gt;</span>
    <span style="color:navy">&lt;dependency&gt;</span>
        <span style="color:navy">&lt;groupId&gt;</span>io.syndesis.connector<span style="color:navy">&lt;/groupId&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>connector-support-test<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;scope&gt;</span>test<span style="color:navy">&lt;/scope&gt;</span>
    <span style="color:navy">&lt;/dependency&gt;</span>
    <span style="color:navy">&lt;dependency&gt;</span>
        <span style="color:navy">&lt;groupId&gt;</span>com.github.spotbugs<span style="color:navy">&lt;/groupId&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>spotbugs-annotations<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;scope&gt;</span>test<span style="color:navy">&lt;/scope&gt;</span>
    <span style="color:navy">&lt;/dependency&gt;</span>
    <span style="color:navy">&lt;dependency&gt;</span>
        <span style="color:navy">&lt;groupId&gt;</span>org.hibernate.validator<span style="color:navy">&lt;/groupId&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>hibernate-validator<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;scope&gt;</span>test<span style="color:navy">&lt;/scope&gt;</span>
    <span style="color:navy">&lt;/dependency&gt;</span>
    <span style="color:navy">&lt;dependency&gt;</span>
        <span style="color:navy">&lt;groupId&gt;</span>org.glassfish<span style="color:navy">&lt;/groupId&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>javax.el<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;scope&gt;</span>test<span style="color:navy">&lt;/scope&gt;</span>
    <span style="color:navy">&lt;/dependency&gt;</span>
    <span style="color:navy">&lt;dependency&gt;</span>
        <span style="color:navy">&lt;groupId&gt;</span>ch.qos.logback<span style="color:navy">&lt;/groupId&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>logback-classic<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;scope&gt;</span>test<span style="color:navy">&lt;/scope&gt;</span>
    <span style="color:navy">&lt;/dependency&gt;</span>
    <span style="color:navy">&lt;dependency&gt;</span>
        <span style="color:navy">&lt;groupId&gt;</span>org.apache.camel<span style="color:navy">&lt;/groupId&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>camel-mongodb3<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;scope&gt;</span>runtime<span style="color:navy">&lt;/scope&gt;</span>
    <span style="color:navy">&lt;/dependency&gt;</span>
    <span style="color:navy">&lt;dependency&gt;</span>
        <span style="color:navy">&lt;groupId&gt;</span>de.flapdoodle.embed<span style="color:navy">&lt;/groupId&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>de.flapdoodle.embed.mongo<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;scope&gt;</span>test<span style="color:navy">&lt;/scope&gt;</span>
    <span style="color:navy">&lt;/dependency&gt;</span>
    <span style="color:#998;font-style:italic">&lt;!-- Analyzer is requiring to explicit this dependency --&gt;</span>
    <span style="color:navy">&lt;dependency&gt;</span>
        <span style="color:navy">&lt;groupId&gt;</span>de.flapdoodle.embed<span style="color:navy">&lt;/groupId&gt;</span>
        <span style="color:navy">&lt;artifactId&gt;</span>de.flapdoodle.embed.process<span style="color:navy">&lt;/artifactId&gt;</span>
        <span style="color:navy">&lt;version&gt;</span>1.50.2<span style="color:navy">&lt;/version&gt;</span>
        <span style="color:navy">&lt;scope&gt;</span>test<span style="color:navy">&lt;/scope&gt;</span>
    <span style="color:navy">&lt;/dependency&gt;</span>
<span style="color:navy">&lt;/dependencies&gt;</span>
</pre></div><p>The last three dependencies are specific to the MongoDB example. The rest are needed by any generic test case. Initially, the scope of the <code>camel-mongodb3</code> dependency is <code>runtime</code>. This is because initial development does not explicitly use this dependency. Only the unit test and finally the integration will do that.</p></li><li><p>Configure plugins in the <code>pom.xml</code> file. For example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>    <span style="color:navy">&lt;build&gt;</span>
        <span style="color:navy">&lt;resources&gt;</span>
            <span style="color:navy">&lt;resource&gt;</span>
                <span style="color:navy">&lt;directory&gt;</span>src/main/resources<span style="color:navy">&lt;/directory&gt;</span>
                <span style="color:navy">&lt;filtering&gt;</span>true<span style="color:navy">&lt;/filtering&gt;</span>
            <span style="color:navy">&lt;/resource&gt;</span>
        <span style="color:navy">&lt;/resources&gt;</span>

        <span style="color:navy">&lt;plugins&gt;</span>
            <span style="color:navy">&lt;plugin&gt;</span>
                <span style="color:navy">&lt;artifactId&gt;</span>maven-resources-plugin<span style="color:navy">&lt;/artifactId&gt;</span>
                <span style="color:navy">&lt;configuration&gt;</span>
                    <span style="color:navy">&lt;delimiters&gt;</span>
                        <span style="color:navy">&lt;delimiter&gt;</span>@<span style="color:navy">&lt;/delimiter&gt;</span>
                    <span style="color:navy">&lt;/delimiters&gt;</span>
                <span style="color:navy">&lt;/configuration&gt;</span>
            <span style="color:navy">&lt;/plugin&gt;</span>

            <span style="color:navy">&lt;plugin&gt;</span>
                <span style="color:navy">&lt;groupId&gt;</span>io.syndesis.connector<span style="color:navy">&lt;/groupId&gt;</span>
                <span style="color:navy">&lt;artifactId&gt;</span>connector-support-maven-plugin<span style="color:navy">&lt;/artifactId&gt;</span>
                <span style="color:navy">&lt;executions&gt;</span>
                    <span style="color:navy">&lt;execution&gt;</span>
                        <span style="color:navy">&lt;id&gt;</span>inspections<span style="color:navy">&lt;/id&gt;</span>
                        <span style="color:navy">&lt;phase&gt;</span>process-classes<span style="color:navy">&lt;/phase&gt;</span>
                        <span style="color:navy">&lt;goals&gt;</span>
                            <span style="color:navy">&lt;goal&gt;</span>generate-connector-inspections<span style="color:navy">&lt;/goal&gt;</span>
                        <span style="color:navy">&lt;/goals&gt;</span>
                    <span style="color:navy">&lt;/execution&gt;</span>
                <span style="color:navy">&lt;/executions&gt;</span>
            <span style="color:navy">&lt;/plugin&gt;</span>
        <span style="color:navy">&lt;/plugins&gt;</span>
    <span style="color:navy">&lt;/build&gt;</span>
<span style="color:navy">&lt;/project&gt;</span>
</pre></div></li></ol></li><li><p>Set up your IDE to get the Maven project for developing the connector.</p></li><li><p>Run <code>mvn install</code> to confirm that the structure of the project is valid, though empty.</p></li></ol><p><strong>Additional resource</strong> There is a new <a href="https://syndesis.io/docs/cli/">Syndesis project CLI</a> with more advanced features that you might want to use to develop your connector.</p><h3 id="specifying-a-connector-definition-json-file">Specifying a connector definition JSON file</h3><p>Each connector must have a <code>.json</code> file that defines the connector by specifying values for data structures such as name, description, supported actions, and dependencies. The purpose of the connector’s JSON file is to provide enough information for the underlying Camel component to create the route and endpoints. This is where you apply what you learned about the Camel component that your connector uses.</p><p>For new connectors, it is not yet possible to automatically generate the connector definition JSON file from Java code.</p><p><strong>Prerequisites</strong> Familiarity with the requirements, parameters, and behavior of the Camel component that the connector uses.</p><p><strong>Procedure</strong></p><ol><li><p>Create an empty file that will contain the connector definition. You must follow the folder hierarchy and naming conventions used by other connectors. For example, the following commands create the connector definition JSON file for the MongoDB connector:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>$ <span style="color:#0086b3">cd</span> app/connector/mongodb
$ mkdir -p src/main/resources/META-INF/syndesis/connector
$ touch src/main/resources/META-INF/syndesis/connector/mongodb.json
</pre></div></li><li><p>Run the validation tool be expect an error because the <code>.json</code> file is still empty.</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">$</span><span style="color:#bbb"> </span>mvn<span style="color:#bbb"> </span>process<span style="color:#000;font-weight:700">-</span>classes<span style="color:#bbb"></span>
...<span style="color:#bbb"></span>
<span style="color:#000;font-weight:700">[</span>ERROR<span style="color:#000;font-weight:700">]</span><span style="color:#bbb"> </span>Failed<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">to</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">execute</span><span style="color:#bbb"> </span>goal<span style="color:#bbb"> </span>io.syndesis.<span style="color:#900;font-weight:700">connector</span>:connector<span style="color:#000;font-weight:700">-</span>support<span style="color:#000;font-weight:700">-</span>maven<span style="color:#000;font-weight:700">-</span><span style="color:#900;font-weight:700">plugin</span>:<span style="color:#099">1.7</span><span style="color:#000;font-weight:700">-</span><span style="color:#900;font-weight:700">SNAPSHOT</span>:generate<span style="color:#000;font-weight:700">-</span>connector<span style="color:#000;font-weight:700">-</span>inspections<span style="color:#bbb"> </span>(inspections)<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">on</span><span style="color:#bbb"> </span>project<span style="color:#bbb"> </span>connector<span style="color:#000;font-weight:700">-</span><span style="color:#900;font-weight:700">mongodb</span>:<span style="color:#bbb"> </span>Execution<span style="color:#bbb"> </span>inspections<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">of</span><span style="color:#bbb"> </span>goal<span style="color:#bbb"> </span>io.syndesis.<span style="color:#900;font-weight:700">connector</span>:connector<span style="color:#000;font-weight:700">-</span>support<span style="color:#000;font-weight:700">-</span>maven<span style="color:#000;font-weight:700">-</span><span style="color:#900;font-weight:700">plugin</span>:<span style="color:#099">1.7</span><span style="color:#000;font-weight:700">-</span><span style="color:#900;font-weight:700">SNAPSHOT</span>:generate<span style="color:#000;font-weight:700">-</span>connector<span style="color:#000;font-weight:700">-</span>inspections<span style="color:#bbb"> </span><span style="color:#900;font-weight:700">failed</span>:<span style="color:#bbb"> </span>unhandled<span style="color:#bbb"> </span>token<span style="color:#bbb"> </span>type<span style="color:#bbb"> </span>NOT_AVAILABLE<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">-&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">[</span>Help 1<span style="color:#000;font-weight:700">]</span><span style="color:#bbb"></span>
</pre></div><p>The plugin guides you to correctly develop the connector by notifying you of any configuration errors.</p></li><li><p>In the empty connector <code>.json</code> file, specify the basic description of the connector, including its name, description, ID, icon, and any properties that provide configuration parameters that are required by the underlying Camel component. The following example, which is part of the MongoDB connector, shows that the Camel MongoDB component requires specification of a MongoDB database host.</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">{</span>
<span style="color:#a61717;background-color:#e3d2d2">  &quot;description&quot;: &quot;Mongo DB connector.&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">  &quot;icon&quot;: &quot;assets:mongodb.png&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">  &quot;id&quot;: &quot;mongodb&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">  &quot;name&quot;: &quot;MongoDB&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">  &quot;properties&quot;: {</span>
<span style="color:#a61717;background-color:#e3d2d2">    &quot;host&quot;: {</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;componentProperty&quot;: true,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;deprecated&quot;: false,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;displayName&quot;: &quot;Database host&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;group&quot;: &quot;common&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;javaType&quot;: &quot;java.lang.String&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;kind&quot;: &quot;property&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;label&quot;: &quot;&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;labelHint&quot;: &quot;Database host.&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;order&quot;: &quot;1&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;required&quot;: true,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;secret&quot;: false,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;tags&quot;: [],</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;type&quot;: &quot;string&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2">    }</span>
<span style="color:#a61717;background-color:#e3d2d2">  },</span>
</pre></div></li><li><p>Define the behavior of connections that will be created from this connector by adding action specifications. An action is an operation that the connection performs according to the pattern specified in the JSON file. Typically, this is a <code>From</code> pattern for consumer endpoints and a <code>To</code> pattern for producer endpoints. You can also specify a <code>Pipe</code> pattern. Add an action specification for every operation that you want a connection to perform.</p><p>The following example shows more of the JSON file for the MongoDB connector. This section specifies the MongoDB producer action.</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">    &quot;actions&quot;: [</span>
<span style="color:#a61717;background-color:#e3d2d2">      {</span>
<span style="color:#a61717;background-color:#e3d2d2">        &quot;actionType&quot;: &quot;connector&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">        &quot;description&quot;: &quot;Mongo DB producer&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">        &quot;descriptor&quot;: {</span>
<span style="color:#a61717;background-color:#e3d2d2">          &quot;componentScheme&quot;: &quot;mongodb&quot;,     </span>
<span style="color:#a61717;background-color:#e3d2d2">          &quot;inputDataShape&quot;: {</span>
<span style="color:#a61717;background-color:#e3d2d2">            &quot;kind&quot;: &quot;json-schema&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2">          },</span>
<span style="color:#a61717;background-color:#e3d2d2">          &quot;outputDataShape&quot;: {</span>
<span style="color:#a61717;background-color:#e3d2d2">            &quot;kind&quot;: &quot;json-schema&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2">          }</span>
<span style="color:#a61717;background-color:#e3d2d2">        },</span>
<span style="color:#a61717;background-color:#e3d2d2">        &quot;id&quot;: &quot;io.syndesis.connector:connector-mongodb-producer&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">        &quot;name&quot;: &quot;Mongo DB producer&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">        &quot;pattern&quot;: &quot;To&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">        &quot;propertyDefinitionSteps&quot;: [</span>
<span style="color:#a61717;background-color:#e3d2d2">            {</span>
<span style="color:#a61717;background-color:#e3d2d2">              &quot;description&quot;: &quot;Enter a database.&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">              &quot;name&quot;: &quot;Database&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">              &quot;properties&quot;: {</span>
<span style="color:#a61717;background-color:#e3d2d2">                &quot;database&quot;: {</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;deprecated&quot;: false,</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;displayName&quot;: &quot;Database name&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;group&quot;: &quot;common&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;javaType&quot;: &quot;java.lang.String&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;kind&quot;: &quot;path&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;labelHint&quot;: &quot;Database name&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;placeholder&quot;: &quot;database&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;required&quot;: true,</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;secret&quot;: false,</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;type&quot;: &quot;string&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2">                },</span>
<span style="color:#a61717;background-color:#e3d2d2">                &quot;collection&quot;: {</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;deprecated&quot;: false,</span>
<span style="color:#a61717;background-color:#e3d2d2">                  ...</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;type&quot;: &quot;string&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2">                },</span>
<span style="color:#a61717;background-color:#e3d2d2">                &quot;operation&quot;: {</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;deprecated&quot;: false,</span>
<span style="color:#a61717;background-color:#e3d2d2">                  ...</span>
<span style="color:#a61717;background-color:#e3d2d2">                  &quot;type&quot;: &quot;string&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2">                }              </span>
<span style="color:#a61717;background-color:#e3d2d2">              }</span>
<span style="color:#a61717;background-color:#e3d2d2">          }    </span>
<span style="color:#a61717;background-color:#e3d2d2">          ]</span>
<span style="color:#a61717;background-color:#e3d2d2">      }    </span>
<span style="color:#a61717;background-color:#e3d2d2">    ],</span>
</pre></div><p>This action definition specifies a producer endpoint that performs certain operations at the end of a route. For example, suppose that you want to obtain data from a source, such as a SQL database or a Twitter feed, and write that data to a collection in a MongoDB database. To write to a MongoDB database, the connection must have values for three parameters: <code>database</code>, <code>collection</code> and <code>operation</code>. The <code>propertyDefinitionSteps</code> object specifies these parameters. When someone creates a connection from your new connector and adds the connection to an integration, the user interface prompts for values for the parameters that you specify in a <code>propertyDefinitionSteps</code> object, that is, <code>database</code>, <code>collection</code>, and <code>operation</code> in this example.</p></li><li><p>Declare Maven dependencies in the connector definition JSON file. Typically, if you are following connector development conventions, you just need to add the following:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>  <span style="color:#d14">&quot;dependencies&quot;</span><span style="color:#000;font-weight:700">:</span> [
    {
      <span style="color:#d14">&quot;id&quot;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#d14">&quot;@project.groupId@:@project.artifactId@:@project.version@&quot;</span>,
      <span style="color:#d14">&quot;type&quot;</span><span style="color:#000;font-weight:700">:</span> <span style="color:#d14">&quot;MAVEN&quot;</span>
    }
  ]
</pre></div></li></ol><p><strong>Additional resources</strong></p><ul><li><p><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.5/html/integrating_applications_with_fuse_online/customizing_ug#about-extension-definitions_extensions">Requirements in an extension definition JSON file</a></p></li><li><p><a href="https://syndesis.io/docs/connector-schema/">Syndesis connector schema explained</a></p></li></ul><h3 id="example-of-creating-a-unit-test-for-a-connector">Example of creating a unit test for a connector</h3><p>With a Maven project, the connector’s definition JSON file, and the Java classes that implement the connector, you have a connector that you can try to include in a Syndesis bundle and deploy. However, before you do that, create a unit test that verifies that the connector will work correctly.</p><p>The <a href="https://github.com/apache/camel/blob/master/components/camel-test/src/main/java/org/apache/camel/test/junit4/CamelTestSupport.java">org.apache.camel.test.junit4.CamelTestSupport</a> class provides upstream Camel support for testing. The <a href="https://github.com/syndesisio/syndesis/blob/master/app/connector/support/test/src/main/java/io/syndesis/connector/support/test/ConnectorTestSupport.java">io.syndesis.connector.support.test.ConnectorTestSupport</a> class extends the <code>CamelTestSupport</code> class. By extending the <code>ConnectorTestSupport</code> class, you can benefit from the environment provided by Camel and Syndesis.</p><p>As you develop a test suite, you will learn about the features offered by these two classes. For the first iteration, implement an abstract method that builds the final route, which includes your new connector. The following example code is a simple test for the MongoDB connector:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">    @Override</span>
<span style="color:#a61717;background-color:#e3d2d2">    protected List&lt;Step&gt; createSteps() {</span>
<span style="color:#a61717;background-color:#e3d2d2">        return Arrays.asList(</span>
<span style="color:#a61717;background-color:#e3d2d2">            newSimpleEndpointStep(&quot;direct&quot;, builder -&gt; builder.putConfiguredProperty(&quot;name&quot;, &quot;start&quot;)),</span>
<span style="color:#a61717;background-color:#e3d2d2">            newEndpointStep(&quot;mongodb&quot;, &quot;io.syndesis.connector:connector-mongodb-producer&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">                builder -&gt; {},</span>
<span style="color:#a61717;background-color:#e3d2d2">                builder -&gt; {</span>
<span style="color:#a61717;background-color:#e3d2d2">                    builder.putConfiguredProperty(&quot;connectionBean&quot;, &quot;connectionBeanContextRef&quot;);</span>
<span style="color:#a61717;background-color:#e3d2d2">                    builder.putConfiguredProperty(&quot;database&quot;, DATABASE);</span>
<span style="color:#a61717;background-color:#e3d2d2">                    builder.putConfiguredProperty(&quot;collection&quot;, COLLECTION);</span>
<span style="color:#a61717;background-color:#e3d2d2">                    builder.putConfiguredProperty(&quot;operation&quot;, &quot;insert&quot;);</span>
<span style="color:#a61717;background-color:#e3d2d2">                })</span>
<span style="color:#a61717;background-color:#e3d2d2">            );</span>
<span style="color:#a61717;background-color:#e3d2d2">    }</span>
</pre></div><p>The parent class uses this method to build a route that consumes data from a <a href="https://camel.apache.org/direct.html">direct component</a> named <code>start</code> and produces data for the <code>mongodb</code> component by using the new connector. This code configures a connector endpoint with the identification that is defined in the connector’s JSON file and passes the map of parameters expected by the implementation: <code>database</code>, <code>collection</code> and <code>operation</code>. (This component also expects a <code>connectionBean</code> parameter and this is discussed later.)</p><p>The last step is to provide the test case. Here is an example of a MongoDB test case:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">    @Test</span>
<span style="color:#a61717;background-color:#e3d2d2">    public void mongoInsertTest() {</span>
<span style="color:#a61717;background-color:#e3d2d2">        // When</span>
<span style="color:#a61717;background-color:#e3d2d2">        // Given</span>
<span style="color:#a61717;background-color:#e3d2d2">        String uniqueId = UUID.randomUUID().toString();</span>
<span style="color:#a61717;background-color:#e3d2d2">        String message = String.format(&quot;{\&quot;test\&quot;:\&quot;unit\&quot;,\&quot;uniqueId\&quot;:\&quot;%s\&quot;}&quot;, uniqueId);</span>
<span style="color:#a61717;background-color:#e3d2d2">        template().sendBody(&quot;direct:start&quot;, message);</span>
<span style="color:#a61717;background-color:#e3d2d2">        // Then</span>
<span style="color:#a61717;background-color:#e3d2d2">        List&lt;Document&gt; docsFound = collection.find(Filters.eq(&quot;uniqueId&quot;, uniqueId)).into(new ArrayList&lt;Document&gt;());</span>
<span style="color:#a61717;background-color:#e3d2d2">        assertEquals(1, docsFound.size());</span>
<span style="color:#a61717;background-color:#e3d2d2">    }</span>
</pre></div><p>To trigger the integration, the code calls the <code>template()</code> method, which is provided by the super class, and provides a body that contains a simple JSON text string with a unique field in it. The route configured above invokes the insert operation to write this JSON into the specified collection in the specified database.</p><p>Finally, as a simple assert condition, the code verifies that the content of a JSON field corresponds to the one that the same test has produced.</p><p>In your development, use a similar strategy when you need to produce some data for your connector. Follow the approach of using a <a href="http://camel.apache.org/mock.html">mock component</a> when you need to consume data from your connector.</p><h6 id="connection-bean">Connection bean</h6><p>To develop a complete test, you need to do one of the following:</p><ul><li>Create a mock service that provides the connection to the Camel component.</li><li>Use an actual service instance.</li></ul><p>In this example, an embedded instance of MongoDB provides the connection. Depending on the Camel component you are using, you might create some sort of connection on demand or to pass it through properties or context configuration. In the example shown here, the component is expecting a connection bean to be available in a Camel <code>Context</code>:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">    @Override</span>
<span style="color:#a61717;background-color:#e3d2d2">    public void postProcessTest() {</span>
<span style="color:#a61717;background-color:#e3d2d2">        MongoClient mongoClient = new MongoClient(&quot;localhost&quot;);</span>
<span style="color:#a61717;background-color:#e3d2d2">        context().getRegistry(JndiRegistry.class).bind(&quot;mongoConnection&quot;, mongoClient);</span>
<span style="color:#a61717;background-color:#e3d2d2">    }</span>
</pre></div><p>The method used here is inherited from the <code>CamelTestSupport</code> class and it is called as soon a context has been created. This wires a bean with a reference that the <code>camel-mongodb3</code> component looks up at runtime.</p><h3 id="customizing-the-behavior-of-an-action-in-a-connector">Customizing the behavior of an action in a connector</h3><p>As the previous sections show, it is possible to develop a connector without customizing the behavior of the Camel component. Some Syndesis connectors do not require customization. Such connectors provide the needed features through correct specification of the JSON connector definition file, including the definition of relevant actions.</p><p>However, customizing a connector is often needed because:</p><ul><li><p>Connecting to a particular Camel component requires configuration that is bound to services that use certain protocols.</p></li><li><p>A connection bean is missing. For example, the connector development described so far would work only for a test case because the connector expects a connection bean to be injected before execution of the integration.</p></li></ul><p>There are two different approaches for customizing a connector by configuring a connection bean. The first approach, described here, is to customize one or more actions. The second approach, described in the next section, is to customize the connector by defining a component delegate.</p><p>As soon as you start customizing your connector, in your Maven <code>pom.xml</code> file, you might need to change the scope of the Camel component to be available at compile time. For example, without customizations, the <code>camel-mongodb</code> component scope of test is okay.</p><p>Syndesis connector proxy development makes it possible to define the exact action behavior you need because you can customize behavior through the lifecycle of a connector action. That is, you can define:</p><ul><li>Behavior that occurs before or after execution of the action itself</li><li>Behavior when creating the connection action<br></li></ul><p>The following section of the MongoDB connector definition JSON file introduces the <code>connectorsCustomizers</code> variable, which customizes the behavior of the action in which it is specified:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">    {</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;actions&quot;: [</span>
<span style="color:#a61717;background-color:#e3d2d2">        {</span>
<span style="color:#a61717;background-color:#e3d2d2">          &quot;actionType&quot;: &quot;connector&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">          &quot;description&quot;: &quot;Mongo DB to&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">          &quot;descriptor&quot;: {</span>
<span style="color:#a61717;background-color:#e3d2d2">            &quot;componentScheme&quot;: &quot;mongodb&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">            &quot;connectorCustomizers&quot;: [</span>
<span style="color:#a61717;background-color:#e3d2d2">              &quot;io.syndesis.connector.mongo.MongoCustomizer&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2">            ],        </span>
<span style="color:#a61717;background-color:#e3d2d2">            ...</span>
<span style="color:#a61717;background-color:#e3d2d2">          &quot;id&quot;: &quot;io.syndesis.connector:connector-mongodb-to&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">          &quot;name&quot;: &quot;Mongo to&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">          &quot;pattern&quot;: &quot;To&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2">        }</span>
</pre></div><p>In the <code>connectorCustomizers</code> object, specify an implementation of the <a href="https://github.com/syndesisio/syndesis/blob/master/app/integration/component-proxy/src/main/java/io/syndesis/integration/component/proxy/ComponentProxyCustomizer.java">io.syndesis.integration.component.proxy.ComponentProxyCustomizer</a> interface. For example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">    public class MongoCustomizer implements ComponentProxyCustomizer,     CamelContextAware {</span>
<span style="color:#a61717;background-color:#e3d2d2">        private CamelContext camelContext;</span>
<span style="color:#a61717;background-color:#e3d2d2">        ...</span>
<span style="color:#a61717;background-color:#e3d2d2">        @Override</span>
<span style="color:#a61717;background-color:#e3d2d2">        public void customize(ComponentProxyComponent component, Map&lt;String, Object&gt; options) {</span>
<span style="color:#a61717;background-color:#e3d2d2">            if (!options.containsKey(&quot;connectionBean&quot;)) {</span>
<span style="color:#a61717;background-color:#e3d2d2">                try {</span>
<span style="color:#a61717;background-color:#e3d2d2">                    String host = (String) options.get(&quot;host&quot;);</span>
<span style="color:#a61717;background-color:#e3d2d2">                    MongoClient mongoClient = new MongoClient(host);</span>
<span style="color:#a61717;background-color:#e3d2d2">                    options.put(&quot;mongoConnection&quot;, mongoClient);</span>
<span style="color:#a61717;background-color:#e3d2d2">                } catch (@SuppressWarnings(&quot;PMD.AvoidCatchingGenericException&quot;) Exception e) {</span>
<span style="color:#a61717;background-color:#e3d2d2">                    throw new IllegalArgumentException(e);</span>
<span style="color:#a61717;background-color:#e3d2d2">                }</span>
<span style="color:#a61717;background-color:#e3d2d2">            }</span>
<span style="color:#a61717;background-color:#e3d2d2">        }</span>
</pre></div><p>In this example, the <code>customize()</code> method:</p><ul><li><p>Obtains information about the MongoDB host, which is defined as a parameter in the connector definition JSON file. When this connector is used to create a connection in the user interface, the user specifies the host.</p><ul><li>Creates a connection.</li></ul></li><li><p>Injects the connection into the bean reference that the Camel component is expecting.</p></li></ul><p>Typically, you must provide a similar implementation to set up the proper connection settings or possibly to transform the parameters that are passed by your user in some other object.</p><p>In this example, the implementation of the <code>CamelContextAware</code> interface wires the runtime Camel context into the <code>MongoCustomizer</code> class. This makes the runtime Camel context available in a <code>MongoCustomizer</code> instance, if you need it.</p><p>With the <code>MongoCustomizer</code> class defined, you can change the test case by removing the context injection. In the unit test example, you would remove the <code>postProcessTest()</code> method. This method is replaced by setting the host from the properties that are passed into the connector. For example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">    ...</span>
<span style="color:#a61717;background-color:#e3d2d2">    builder -&gt; {</span>
<span style="color:#a61717;background-color:#e3d2d2">        builder.putConfiguredProperty(&quot;connectionBean&quot;, &quot;connectionBeanContextRef&quot;);</span>
<span style="color:#a61717;background-color:#e3d2d2">    builder.putConfiguredProperty(&quot;host&quot;, “localhost”);</span>
<span style="color:#a61717;background-color:#e3d2d2">        builder.putConfiguredProperty(&quot;database&quot;, DATABASE);</span>
<span style="color:#a61717;background-color:#e3d2d2">    ...</span>
</pre></div><p>The connector is now ready to be tested in a Syndesis integration.</p><h6 id="multiple-action-customizations">Multiple action customizations</h6><p>Sometimes, a connector requires the same customization for several actions. In this case, rather than copying the same configuration to these actions, configure the customized behavior for the connector rather than for each action. Also, it is possible to have more than one instance of <code>connectorCustomizers</code> in the connector definition JSON file. In the following example, you can see a configuration that defines both a generic connector customizer and a specific action customizer:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">    {</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;actions&quot;: [</span>
<span style="color:#a61717;background-color:#e3d2d2">        {</span>
<span style="color:#a61717;background-color:#e3d2d2">            ...</span>
<span style="color:#a61717;background-color:#e3d2d2">            &quot;connectorCustomizers&quot;: [</span>
<span style="color:#a61717;background-color:#e3d2d2">              &quot;io.syndesis.connector.mongo.MongoOperationCustomizer&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2">            ],        </span>
<span style="color:#a61717;background-color:#e3d2d2">            ...</span>
<span style="color:#a61717;background-color:#e3d2d2">          &quot;pattern&quot;: &quot;From&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2">        }    </span>
<span style="color:#a61717;background-color:#e3d2d2">      ],</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;configuredProperties&quot;: {},</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;connectorCustomizers&quot;: [</span>
<span style="color:#a61717;background-color:#e3d2d2">        &quot;io.syndesis.connector.mongo.MongoClientCustomizer&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2">      ],   </span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;description&quot;: &quot;Mongo DB connector.&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">    ...</span>
<span style="color:#a61717;background-color:#e3d2d2">    }</span>
</pre></div><p>The two definitions of <code>connectorCustomizers</code> work together to customize the general behavior as well as the behavior of a specific action.</p><h5 id="customizing-general-behavior-in-a-connector">Customizing general behavior in a connector</h5><p>Another approach to customization is to define a component delegate, which lets you control behavior through the lifecycle of the Camel component. A series of customizable methods that you define specifies the needed behaviors. These methods are exposed in the <code>ComponentProxyComponent</code> class that your connector class must extend.</p><p>In your connector definition JSON file, add a <code>connectorFactory</code> parameter. The following segment of the MongoDB JSON file provides an example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">    {</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;description&quot;: &quot;Mongo DB connector.&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;connectorFactory&quot;: &quot;io.syndesis.connector.mongo.MongoConnectorFactory&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;icon&quot;: &quot;assets:mongodb.svg&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">      &quot;id&quot;: &quot;mongodb&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">     ...</span>
</pre></div><p>This configuration instructs the Syndesis connector manager to instantiate the <code>MongoConnectorFactory</code> class whenever the connector manager needs to create a MongoDB connector. The <code>MongoConnectorFactory</code> class implements the <a href="https://github.com/syndesisio/syndesis/blob/master/app/integration/component-proxy/src/main/java/io/syndesis/integration/component/proxy/ComponentProxyFactory.java"><code>ComponentProxyFactory</code></a>) interface, as shown in this example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">    public class MongoConnectorFactory implements ComponentProxyFactory{</span>
<span style="color:#a61717;background-color:#e3d2d2">        @Override</span>
<span style="color:#a61717;background-color:#e3d2d2">        public ComponentProxyComponent newInstance(String componentId, String componentScheme) {</span>
<span style="color:#a61717;background-color:#e3d2d2">            return new MongoConnector(componentId,componentScheme);</span>
<span style="color:#a61717;background-color:#e3d2d2">        }</span>
<span style="color:#a61717;background-color:#e3d2d2">    }</span>
</pre></div><p>The real logic is in the connector class that you define. This class must extend the <a href="https://github.com/syndesisio/syndesis/blob/master/app/integration/component-proxy/src/main/java/io/syndesis/integration/component/proxy/ComponentProxyComponent.java"><code>ComponentProxyComponent</code></a> class, which provides integration with the Camel component. If you do not specify any customization, this default class is the one that your Syndesis connector uses.</p><p>The following sample code customizes component behavior by providing a connection bean that is available at runtime:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">    @SuppressWarnings(&quot;PMD.SignatureDeclareThrowsException&quot;)</span>
<span style="color:#a61717;background-color:#e3d2d2">    @Override</span>
<span style="color:#a61717;background-color:#e3d2d2">    protected Map&lt;String, String&gt; buildEndpointOptions(String remaining, Map&lt;String, Object&gt; options) throws Exception {</span>
<span style="color:#a61717;background-color:#e3d2d2">         if(this.getCamelContext().getRegistry().lookup(remaining) == null){</span>
<span style="color:#a61717;background-color:#e3d2d2">             String host = (String) options.get(&quot;host&quot;);</span>
<span style="color:#a61717;background-color:#e3d2d2">           MongoClient mongoClient = new MongoClient(host);</span>
<span style="color:#a61717;background-color:#e3d2d2">             options.put(&quot;mongoConnection&quot;, mongoClient);</span>
<span style="color:#a61717;background-color:#e3d2d2">        }</span>
<span style="color:#a61717;background-color:#e3d2d2">        return super.buildEndpointOptions(remaining, options);</span>
<span style="color:#a61717;background-color:#e3d2d2">    }</span>
</pre></div><p>However, the typical workflow, which many connectors perform, expects a complete new delegate component to be created by calling the <code>createDelegateComponent()</code> method.</p><p>If you need to handle only changes in the <code>Exchange</code> object, another approach is to use the available pre/post producer/consumer processors, as shown in this example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>    <span style="color:navy">MongoConnector</span><span style="color:#000;font-weight:700">(</span><span style="color:navy">String</span> <span style="color:navy">componentId</span><span style="color:#000;font-weight:700">,</span> <span style="color:navy">String</span> <span style="color:navy">componentScheme</span><span style="color:#000;font-weight:700">)</span> {
        <span style="color:#a61717;background-color:#e3d2d2">super(componentId,</span> <span style="color:#a61717;background-color:#e3d2d2">componentScheme)</span>;
        <span style="color:#a61717;background-color:#e3d2d2">this.setBeforeProducer(</span>this:<span style="color:#000;font-weight:700">:</span>beforeProduced);
    }

    <span style="color:navy">public</span> <span style="color:navy">void</span> <span style="color:navy">beforeProduced</span><span style="color:#000;font-weight:700">(</span><span style="color:navy">Exchange</span> <span style="color:navy">exchange</span><span style="color:#000;font-weight:700">)</span> <span style="color:navy">throws</span> <span style="color:navy">Exception</span>{
          <span style="color:#a61717;background-color:#e3d2d2">...</span> <span style="color:#a61717;background-color:#e3d2d2">do</span> <span style="color:#a61717;background-color:#e3d2d2">something</span> <span style="color:#a61717;background-color:#e3d2d2">with</span> <span style="color:#a61717;background-color:#e3d2d2">the</span> <span style="color:#a61717;background-color:#e3d2d2">Exchange</span>
    }
</pre></div><p>By using a component delegate, you have a higher degree of flexibility for implementing the features that you need to develop. To verify that the connector is working as expected, you can reuse the same unit test. You can then create integrations that test connector behavior in Syndesis.</p><h3 id="providing-an-icon-for-a-connector">Providing an icon for a connector</h3><p>To show the flow of an integration, Syndesis displays icons that identify the applications that the integration is connecting to. When you develop a connector, you should provide an image that Syndesis can use as the connector icon and as the icon for connections created from the connector.</p><p><strong>Prerequisites</strong></p><ul><li>An image that represents the application that your connector accesses</li><li>A connector definition JSON file that defines your connector</li></ul><p><strong>Procedure</strong></p><ol><li><p>Add an image to the Syndesis <code>app/ui-react/syndesis/public/icons</code> folder. The image should identify the application that your connector accesses. For example, the image for the MongoDB connector is <code>mongodb.png</code>: <img src="https://syndesis.io/images/syndesimongodb.png" alt="MongoDB icon"></p></li><li><p>In the connector definition JSON file, specify the <code>icon</code> attribute. with the name of your image file. Follow the format shown here:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">&quot;description&quot;: &quot;Read and write MongoDB collections&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">&quot;icon&quot;: &quot;assets:mongodb.png&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">&quot;id&quot;: &quot;mongodb3&quot;,</span>
</pre></div></li><li><p>Optional. If your connector is not yet ready for a production environment, set the <code>tech-preview</code> attribute in the connector definition JSON file. For example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">&quot;description&quot;: &quot;Read and write MongoDB collections&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">&quot;icon&quot;: &quot;assets:mongodb.png&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">&quot;id&quot;: &quot;mongodb3&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">&quot;metadata&quot;: {</span>
<span style="color:#a61717;background-color:#e3d2d2">&quot;tech-preview&quot;: &quot;true&quot;</span>
</pre></div><p>Remember to remove or unset <code>tech-preview</code> when the connector has all needed features and can be used in production.</p></li></ol><h3 id="integrating-a-new-connector-with-existing-connectors">Integrating a new connector with existing connectors</h3><p>After you implement and successfully test a new connector, integrate the new connector with the other Syndesis components. When review and testing is complete, submit a pull request.</p><p><strong>Procedure</strong></p><ol><li><p>To indicate to other Syndesis modules that a new connector is available, in the <code>syndesis</code> directory, edit the following <code>pom.xml</code> files:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">app/connector/pom.xml</span>
<span style="color:#a61717;background-color:#e3d2d2">app/connector/support/catalog/pom.xml</span>
<span style="color:#a61717;background-color:#e3d2d2">app/integration/bom/pom.xml</span>
<span style="color:#a61717;background-color:#e3d2d2">app/integration/bom-camel-k/pom.xml</span>
<span style="color:#a61717;background-color:#e3d2d2">app/meta/pom.xml</span>
<span style="color:#a61717;background-color:#e3d2d2">app/pom.xml</span>
</pre></div><p>In the <code>app/connector/pom.xml</code> file, which is the parent <code>pom.xml</code> file for your connector, find the modules list and add an entry for your new module. In the rest of the <code>pom.xml</code> files, find the connector <code>&lt;dependencies&gt;</code> list and add an entry for your new connector. Some files might require specification of a version number. Copy and edit an existing entry. Try to maintain alphabetical order so that it is easier to find a particular dependency.</p></li><li><p>Build Syndesis by invoking the following command:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>$ syndesis build
</pre></div><p>This is preferred because the same command can deploy Syndesis. Alternatively, you can build Syndesis by executing Maven at the base application path, which is <code>app/pom.xml</code>.</p><p>The build takes some time as it compiles and tests all modules. There are several <a href="https://syndesis.io/docs/cli/">shortcuts and flags that you can use to accelerate this process</a>.</p></li><li><p>Start minishift:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>$ minishift start
</pre></div></li><li><p>Log in with the proper development profile, for example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>$ oc login -u developer -p developer
</pre></div><p>This grants the required deployment privileges to <code>fabric8-maven-plugin</code>.</p></li><li><p>After the build completes, deploy Syndesis in your local minishift environment by invoking the following command:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>$ syndesis minishift --install --local
</pre></div><p>Omit the <code>--local</code> option for a remote installation. Optionally, specify a base tag, such as <code>--tag 1.8</code> to indicate where to start the installation.</p></li><li><p>When Syndesis is running, iteratively:</p><ol><li><p>Test your connector by creating and using it in an integration.</p></li><li><p>Update the connector as needed.</p></li><li><p>Refresh your deployment to add your changes by updating two Syndesis modules. To do this, invoke the following commands:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>$ syndesis build -f -i -m server
$ syndesis build -f -i -m s2i      
</pre></div><p>The <code>server</code> module sets the metadata (parameter values) that the Syndesis user interface needs to configure an integration. The <code>s2i</code> module:</p><ul><li>Creates the Camel route by binding the integration runtime to a docker image</li><li>Provides Camel dependencies and configuration</li><li>Deploys the integration to the platform, Camel in this case, through the Syndesis <code>project-generator</code> module</li></ul></li><li><p>Optionally, rebuild the Syndesis backend modules by invoking the following command:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>$ syndesis build -f -i -b
</pre></div><p>The <code>-i</code> or <code>--image</code> flag instructs your local installation to refresh the deployment in your local environment. This applies your changes.</p><p>For a change to metadata information, such as a datashape change, or a change related to the connector definition JSON file, rebuilding backend modules is not required.</p></li></ol></li><li><p>After careful review and successful local testing, <a href="https://syndesis.io/community/contributing/#submitting-a-pull-request">create a pull request</a>.</p></li><li><p>After your updates are merged to Syndesis <code>master</code>, test your connector in the <a href="https://syndesis-staging.b6ff.rh-idev.openshiftapps.com.">Syndesis staging environment</a>. Syndesis uses CircleCI pipelines to keep its staging environment up to date.</p></li></ol><h3 id="verifying-connections-that-are-created-from-a-connector">Verifying connections that are created from a connector</h3><p>Using a connector to create a connection typically requires a request that contains specific user credentials and that goes to an external system. Syndesis provides a feature for validating the configuration of this kind of connection directly from the user interface. Several development tasks are required to implement connection validation from the user interface.</p><p>The typical procedure is to add the connection verifier to the upstream platform, for example, to the Camel component that the connector uses. In other words, you provide the verifier upstream first and then later you use the class from the verifier descriptor. If there is a specific requirement that prevents adding the verifier upstream, only then should you consider adding the verifier to Syndesis.</p><p><strong>Procedure</strong></p><ol><li><p>Examine your connector definition JSON file to obtain the id that it specifies for the connector. For example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">...</span>
<span style="color:#a61717;background-color:#e3d2d2">  &quot;id&quot;: &quot;mongodb&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">...</span>
</pre></div></li><li><p>Create a new resource file and use the structure shown in the following commands. In this example, the result is the resource file for the MongoDB connector:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span>$ <span style="color:#0086b3">cd</span> ~/syndesis/app/connector/mongodb
$ mkdir -p src/main/resources/META-INF/syndesis/connector/verifier
$ touch src/main/resources/META-INF/syndesis/connector/verifier/mongodb
</pre></div><p>The <code>META-INF/syndesis/connector/meta/mongodb3</code> class, when invoked, takes care of looking up the connector definition JSON file.</p></li><li><p>In the <code>verifier</code> resource file, specify the name of the verifier class that you plan to develop. For example, the content of the <code>verifier/mongodb</code> resource file is:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2">class=io.syndesis.connector.mongo.verifier.MongoDBVerifier</span>
</pre></div></li><li><p>Develop the required business logic in a class that extends the <code>ComponentVerifier</code> class, which is defined in <code>syndesis/app/connector/support/verifier/src/main/java/io/syndesis/connector/support/verifier/api/</code>. For example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#000;font-weight:700">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">class</span><span style="color:#bbb"> </span>MongoDBVerifier<span style="color:#bbb"> </span>extends<span style="color:#bbb"> </span>ComponentVerifier<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">{</span><span style="color:#bbb"></span>
<span style="color:#bbb">    </span><span style="color:#000;font-weight:700">public</span><span style="color:#bbb"> </span>MongoDBVerifier()<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">{</span><span style="color:#bbb"></span>
<span style="color:#bbb">        </span>super(<span style="color:#990073">&quot;mongodb&quot;</span>);<span style="color:#bbb"></span>
<span style="color:#bbb">    </span><span style="color:#a61717;background-color:#e3d2d2">}</span><span style="color:#bbb"></span>

<span style="color:#bbb">   </span><span style="color:teal">@Override</span><span style="color:#bbb"></span>
<span style="color:#bbb">   </span>protected<span style="color:#bbb"> </span>ComponentVerifierExtension<span style="color:#bbb"> </span>resolveComponentVerifierExtension(CamelContext<span style="color:#bbb"> </span>context,<span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>scheme)<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">{</span><span style="color:#bbb"></span>
<span style="color:#bbb">       </span><span style="color:#000;font-weight:700">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">new</span><span style="color:#bbb"> </span>MongoConnectorVerifierExtension(context);<span style="color:#bbb"></span>
<span style="color:#bbb">   </span><span style="color:#a61717;background-color:#e3d2d2">}</span><span style="color:#bbb"></span>
<span style="color:#a61717;background-color:#e3d2d2">}</span><span style="color:#bbb"></span>
</pre></div><p>Notice that the constructor provides the name of the Camel component that the connector uses. In the <code>verifier</code> folder, the file must have this same name.</p></li><li><p>Delegate the verification to a further class:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#000;font-weight:700">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">class</span><span style="color:#bbb"> </span>MongoConnectorVerifierExtension<span style="color:#bbb"> </span>extends<span style="color:#bbb"> </span>DefaultComponentVerifierExtension<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">{</span><span style="color:#bbb"></span>

<span style="color:#bbb">   </span><span style="color:#000;font-weight:700">public</span><span style="color:#bbb"> </span>MongoConnectorVerifierExtension(CamelContext<span style="color:#bbb"> </span>camelContext)<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">{</span><span style="color:#bbb"></span>
<span style="color:#bbb">       </span>super(<span style="color:#990073">&quot;mongodb&quot;</span>,<span style="color:#bbb"> </span>camelContext);<span style="color:#bbb"></span>
<span style="color:#bbb">   </span><span style="color:#a61717;background-color:#e3d2d2">}</span><span style="color:#bbb"></span>

<span style="color:#bbb">   </span><span style="color:teal">@Override</span><span style="color:#bbb"></span>
<span style="color:#bbb">   </span><span style="color:#000;font-weight:700">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">Result</span><span style="color:#bbb"> </span>verifyParameters(<span style="color:#000;font-weight:700">Map&lt;</span>String,<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">Object&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">parameters</span>)<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">{</span><span style="color:#bbb"></span>
<span style="color:#bbb">       </span>ResultBuilder<span style="color:#bbb"> </span>builder<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">=</span><span style="color:#bbb"> </span>ResultBuilder.withStatusAndScope(<span style="color:#000;font-weight:700">Result</span>.Status.OK,<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">Scope</span>.<span style="color:#000;font-weight:700">PARAMETERS</span>)<span style="color:#bbb"></span>
<span style="color:#bbb">               </span>.error(ResultErrorHelper.requiresOption(<span style="color:#990073">&quot;host&quot;</span>,<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">parameters</span>))<span style="color:#bbb"></span>
<span style="color:#bbb">       </span><span style="color:#000;font-weight:700">return</span><span style="color:#bbb"> </span>builder.build();<span style="color:#bbb"></span>
<span style="color:#bbb">   </span><span style="color:#a61717;background-color:#e3d2d2">}</span><span style="color:#bbb"></span>

<span style="color:#bbb">   </span><span style="color:teal">@Override</span><span style="color:#bbb"></span>
<span style="color:#bbb">   </span><span style="color:#000;font-weight:700">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">Result</span><span style="color:#bbb"> </span>verifyConnectivity(<span style="color:#000;font-weight:700">Map&lt;</span>String,<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">Object&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">parameters</span>)<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">{</span><span style="color:#bbb"></span>
<span style="color:#bbb">       </span><span style="color:#000;font-weight:700">return</span><span style="color:#bbb"> </span>ResultBuilder.withStatusAndScope(<span style="color:#000;font-weight:700">Result</span>.Status.OK,<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">Scope</span>.CONNECTIVITY)<span style="color:#bbb"></span>
<span style="color:#bbb">               </span>.error(<span style="color:#000;font-weight:700">parameters</span>,<span style="color:#bbb"> </span><span style="color:#900;font-weight:700">this</span>:<span style="color:#a61717;background-color:#e3d2d2">:</span>verifyCredentials)<span style="color:#bbb"></span>
<span style="color:#bbb">               </span>.build();<span style="color:#bbb"></span>
<span style="color:#bbb">   </span><span style="color:#a61717;background-color:#e3d2d2">}</span><span style="color:#bbb"></span>

<span style="color:#bbb">   </span>private<span style="color:#bbb"> </span>void<span style="color:#bbb"> </span>verifyCredentials(ResultBuilder<span style="color:#bbb"> </span>builder,<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">Map&lt;</span>String,<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">Object&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">parameters</span>)<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">{</span><span style="color:#bbb"></span>
<span style="color:#bbb">       </span><span style="color:#000;font-weight:700">try</span><span style="color:#bbb"> </span>(MongoClient<span style="color:#bbb"> </span>mongoClient<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">new</span><span style="color:#bbb"> </span>MongoClient(<span style="color:#000;font-weight:700">parameters</span>.<span style="color:#000;font-weight:700">get</span>(<span style="color:#990073">&quot;host&quot;</span>)))<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">{</span><span style="color:#bbb"></span>
<span style="color:#bbb">           </span><span style="color:#000;font-weight:700">//</span><span style="color:#bbb"> </span>Just<span style="color:#bbb"> </span>ping<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>server<span style="color:#bbb"></span>
<span style="color:#bbb">           </span>mongoClient.getConnectPoint();<span style="color:#bbb"></span>
<span style="color:#bbb">       </span><span style="color:#a61717;background-color:#e3d2d2">}</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">catch</span><span style="color:#bbb"> </span>(<span style="color:#000;font-weight:700">Exception</span><span style="color:#bbb"> </span>e)<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">{</span><span style="color:#bbb"></span>
<span style="color:#bbb">           </span>ResultErrorBuilder<span style="color:#bbb"> </span>errorBuilder<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">=</span><span style="color:#bbb"> </span>ResultErrorBuilder.withCodeAndDescription(<span style="color:#bbb"></span>
<span style="color:#bbb">                   </span>VerificationError.StandardCode.GENERIC,<span style="color:#bbb"></span>
<span style="color:#bbb">                   </span>e.getMessage());<span style="color:#bbb"></span>
<span style="color:#bbb">           </span>builder.error(errorBuilder.build());<span style="color:#bbb"></span>
<span style="color:#bbb">       </span><span style="color:#a61717;background-color:#e3d2d2">}</span><span style="color:#bbb"></span>
<span style="color:#bbb">   </span><span style="color:#a61717;background-color:#e3d2d2">}</span><span style="color:#bbb"></span>
<span style="color:#a61717;background-color:#e3d2d2">}</span><span style="color:#bbb"></span>
</pre></div><p>In the <code>verifyParameters()</code> method, indicate the parameters that are required for connection validation. In the MongoDB example, only the <code>host</code> parameter is required to verify connectivity.</p><p>Consider that this example defines a further <code>verifyCredentials()</code> method for eventually defining a more advanced test than simply connecting to the server. Initially, the method just catches a generic exception. A more advanced approach is to catch different specialized exceptions and provide specific messages for the error that might occur, such as authentication failed, network failure, file missing, and so on.</p></li><li><p>In the connector definition JSON file, add a tag to indicate to the user interface how to enable verification of this connector. For example:</p><div class="highlight" style="background:#fff"><pre style="line-height:125%"><span></span><span style="color:#a61717;background-color:#e3d2d2"> &quot;id&quot;: &quot;mongodb3&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2"> &quot;name&quot;: &quot;MongoDB&quot;,</span>
<span style="color:#a61717;background-color:#e3d2d2">    ...</span>
<span style="color:#a61717;background-color:#e3d2d2"> &quot;tags&quot;: [</span>
<span style="color:#a61717;background-color:#e3d2d2">   &quot;verifier&quot;</span>
<span style="color:#a61717;background-color:#e3d2d2"> ]</span>
<span style="color:#a61717;background-color:#e3d2d2">}</span>
</pre></div></li></ol><h3 id="additional-resources">Additional resources</h3><ul><li><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.5/html/integrating_applications_with_fuse_online/customizing_ug#developing-extensions_custom">Developing extensions</a></li><li><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.5/html/integrating_applications_with_fuse_online/customizing_ug#develop-connector-extensions_extensions">Brief example of developing a connector extension</a></li></ul></div></div></div><div class="toc hidden-md-down"><nav id="TableOfContents"><ul><li><ul><li><ul><li><a href="#overview-of-how-to-develop-a-connector">Overview of how to develop a connector</a></li><li><a href="#learning-about-the-camel-component-that-the-connector-uses">Learning about the Camel component that the connector uses</a></li><li><a href="#configuring-a-maven-project-for-developing-a-connector">Configuring a Maven project for developing a connector</a></li><li><a href="#specifying-a-connector-definition-json-file">Specifying a connector definition JSON file</a></li><li><a href="#example-of-creating-a-unit-test-for-a-connector">Example of creating a unit test for a connector</a><ul><li><ul><li><ul><li><a href="#connection-bean">Connection bean</a></li></ul></li></ul></li></ul></li><li><a href="#customizing-the-behavior-of-an-action-in-a-connector">Customizing the behavior of an action in a connector</a><ul><li><ul><li><ul><li><a href="#multiple-action-customizations">Multiple action customizations</a></li></ul></li><li><a href="#customizing-general-behavior-in-a-connector">Customizing general behavior in a connector</a></li></ul></li></ul></li><li><a href="#providing-an-icon-for-a-connector">Providing an icon for a connector</a></li><li><a href="#integrating-a-new-connector-with-existing-connectors">Integrating a new connector with existing connectors</a></li><li><a href="#verifying-connections-that-are-created-from-a-connector">Verifying connections that are created from a connector</a></li><li><a href="#additional-resources">Additional resources</a></li></ul></li></ul></li></ul></nav></div></div><footer class="page-footer text-center"><div class="row"><section class="col-md-6"><i class="fa fa-3x fa-github" aria-hidden="true"></i><h4>Get the source code</h4><p>Stay tuned to contribute or build your own solution.</p><p class="link-button"><a href="https://github.com/syndesisio" rel="nofollow" target="_blank" class="btn btn-primary">Syndesis on GitHub</a></p></section><section class="col-md-6"><i class="fa fa-3x fa-comments-o"></i><h4>Connect with us</h4><p>Chat with the Syndesis community.</p><p class="link-button"><a href="irc://freenode.net/syndesis" rel="nofollow" target="_blank" class="btn btn-primary">#syndesis on Freenode IRC</a></p></section></div><div class="rh-logo"><section><a href="https://www.redhat.com" rel="nofollow" title="Red Hat, Inc." target="_blank"><img src="https://syndesis.io/images/redhat.svg" alt="Red Hat, Inc."></a></section></div></footer></div><script src="https://syndesis.io/js/syndesis.js"></script></body></html>